<?php
# {{ competition_name }} Web Application
# Generated by Ansible from template

# Database connection info
$host = "{{ docker.mysql.container_name }}";
$db = "{{ docker.mysql.database }}";
$user = "{{ docker.mysql.app_user }}";
$pass = "{{ docker.mysql.app_password }}";

$conn = new mysqli($host, $user, $pass, $db);

if ($conn->connect_error) {
    die("Connection error: " . $conn->connect_error);
}

echo "<h1>{{ competition_name }} Web Application</h1>";
echo "<h2>Database Messages:</h2>";

$result = $conn->query("SELECT message FROM test_table");

while ($row = $result->fetch_assoc()) {
    echo "<p>" . htmlspecialchars($row['message']) . "</p>";
}

$conn->close();
?>
